# 变量聚合

## 功能概述

变量聚合节点（原变量赋值节点）是GoModel工作流中的核心组件，用于将多分支输出统一整合为单一变量。通过该功能，您可以：

- 合并不同分支的同类型输出
- 简化下游节点的变量引用
- 避免重复配置相同功能的节点

> **典型应用场景**：问题分类处理、条件分支合并、多路输出归一化

## 使用场景

### 场景一：问题分类结果聚合

**未使用变量聚合时**  
分类1和分类2分支需要分别配置下游节点（如LLM节点和回复节点），导致重复工作。

（这里需要插入"问题分类无聚合时的复杂流程图"图片）
![问题分类（无变量聚合）](图片路径请替换.png "建议图片路径：/docs/images/no_var_aggregation.png")

**使用变量聚合后**  
不同分类分支的知识检索结果可统一输出，下游只需配置一次。

（这里需要插入"使用变量聚合后的简化流程图"图片）
![分类结果聚合](图片路径请替换.png "建议图片路径：/docs/images/classification_aggregation.png")

### 场景二：条件分支结果合并

（这里需要插入"条件分支聚合示意图"图片）
![条件分支聚合](图片路径请替换.png "建议图片路径：/docs/images/condition_aggregation.png")

## 技术规范

### 数据类型支持
支持聚合以下数据类型：
- 字符串（`String`）
- 数字（`Number`）
- 文件（`File`）
- 对象（`Object`）
- 数组（`Array`）

### 使用限制
1. **类型一致性原则**：单组内所有聚合变量必须是相同数据类型（由第一个添加的变量类型决定）
2. **分组功能**：启用"聚合分组"后可同时维护多组变量集合，每组独立遵守类型一致性原则

## 最佳实践建议
- 在分支节点后立即添加变量聚合节点
- 为聚合变量设置具有业务意义的名称
- 复杂场景建议启用分组功能保持逻辑清晰
